<!DOCTYPE HTML>
<html lang="en-US" manifest="..\../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Querying Observable Sequences | RxJS - Javascript library for functional reactive programming.</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="xgrommx">
        <meta name="description" content="Reactive Extensions (Rx) is a library for composing asynchronous and event-based programs using observable sequences and LINQ-style query operators.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="..\../content/creating_and_querying_observable_sequences/operators_by_category.html" />
        
        
        <link rel="prev" href="..\../content/creating_and_querying_observable_sequences/bridging_to_callbacks_and_promises.html" />
        

        <meta property="og:title" content="Querying Observable Sequences | RxJS - Javascript library for functional reactive programming.">
        <meta property="og:site_name" content="RxJS - Javascript library for functional reactive programming.">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/xgrommx">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="..\..\gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="..\..\gitbook/style.css">
        


        
    <div class="book" data-github="xgrommx/rx-book" data-level="2.4" data-basepath="..\.." data-revision="1400183713449">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/xgrommx/rx-book" target="_blank" class="btn pull-left"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/xgrommx/rx-book/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/xgrommx/rx-book/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="..\../" >RxJS - Javascript library for functional reactive programming.</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/xgrommx" target="blank">About the author</a>
        </li>
        

        
        <li>
            <a href="https://github.com/xgrommx/rx-book/issues" target="blank">Questions and Issues</a>
        </li>
        

        
        <li>
            <a href="https://github.com/xgrommx/rx-book/edit/master/content/creating_and_querying_observable_sequences/querying_observable_sequences.md" target="blank">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="..\../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="content/getting_started_with_rxjs/README.html">
                
                <a href="..\../content/getting_started_with_rxjs/README.html">
                    <i class="fa fa-check"></i> <b>1.</b> Getting Started With RxJS
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="content/getting_started_with_rxjs/what_are_the_reactive_extensions.html">
                            
                            <a href="..\../content/getting_started_with_rxjs/what_are_the_reactive_extensions.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> What are the Reactive Extensions?
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="content/getting_started_with_rxjs/exploring_major_concepts_in_rxjs.html">
                            
                            <a href="..\../content/getting_started_with_rxjs/exploring_major_concepts_in_rxjs.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Exploring Major Concepts in RxJS
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="content/getting_started_with_rxjs/subjects.html">
                            
                            <a href="..\../content/getting_started_with_rxjs/subjects.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Subjects
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="content/getting_started_with_rxjs/using_schedulers.html">
                            
                            <a href="..\../content/getting_started_with_rxjs/using_schedulers.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Using Schedulers
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="content/getting_started_with_rxjs/testing_your_rx_application.html">
                            
                            <a href="..\../content/getting_started_with_rxjs/testing_your_rx_application.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Testing your Rx application
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="content/getting_started_with_rxjs/implementing_your_own_observable_operators.html">
                            
                            <a href="..\../content/getting_started_with_rxjs/implementing_your_own_observable_operators.html">
                                <i class="fa fa-check"></i> <b>1.6.</b> Implementing Your Own Observable Operators
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="content/creating_and_querying_observable_sequences/README.html">
                
                <a href="..\../content/creating_and_querying_observable_sequences/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> Creating and Querying Observable Sequences
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="content/creating_and_querying_observable_sequences/creating_and_subscribing_to_simple_observable_sequences.html">
                            
                            <a href="..\../content/creating_and_querying_observable_sequences/creating_and_subscribing_to_simple_observable_sequences.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Creating and Subscribing to Simple Observable Sequences
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="content/creating_and_querying_observable_sequences/bridging_to_events.html">
                            
                            <a href="..\../content/creating_and_querying_observable_sequences/bridging_to_events.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Bridging to Events
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="content/creating_and_querying_observable_sequences/bridging_to_callbacks_and_promises.html">
                            
                            <a href="..\../content/creating_and_querying_observable_sequences/bridging_to_callbacks_and_promises.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Bridging to Callbacks and Promises
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="content/creating_and_querying_observable_sequences/querying_observable_sequences.html">
                            
                            <a href="..\../content/creating_and_querying_observable_sequences/querying_observable_sequences.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> Querying Observable Sequences
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="content/creating_and_querying_observable_sequences/operators_by_category.html">
                            
                            <a href="..\../content/creating_and_querying_observable_sequences/operators_by_category.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> Operators by Category
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="content/observable/README.html">
                
                <a href="..\../content/observable/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Rx.Observable
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="content/observable/amb.html">
                            
                            <a href="..\../content/observable/amb.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> amb
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="content/observable/case.html">
                            
                            <a href="..\../content/observable/case.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> case
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="content/observable/catch.html">
                            
                            <a href="..\../content/observable/catch.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> catch
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="content/observable/concat.html">
                            
                            <a href="..\../content/observable/concat.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> concat
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.5" data-path="content/observable/create.html">
                            
                            <a href="..\../content/observable/create.html">
                                <i class="fa fa-check"></i> <b>3.5.</b> create
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.6" data-path="content/observable/defer.html">
                            
                            <a href="..\../content/observable/defer.html">
                                <i class="fa fa-check"></i> <b>3.6.</b> defer
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 60%;min-width: 55%;"></div>
    </div>
    <div class="chapters">
    
        <a href="..\../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="..\../content/getting_started_with_rxjs/README.html" title="Getting Started With RxJS" class="chapter done new-chapter" data-progress="1" style="left: 5%;"></a>
    
        <a href="..\../content/getting_started_with_rxjs/what_are_the_reactive_extensions.html" title="What are the Reactive Extensions?" class="chapter done " data-progress="1.1" style="left: 10%;"></a>
    
        <a href="..\../content/getting_started_with_rxjs/exploring_major_concepts_in_rxjs.html" title="Exploring Major Concepts in RxJS" class="chapter done " data-progress="1.2" style="left: 15%;"></a>
    
        <a href="..\../content/getting_started_with_rxjs/subjects.html" title="Subjects" class="chapter done " data-progress="1.3" style="left: 20%;"></a>
    
        <a href="..\../content/getting_started_with_rxjs/using_schedulers.html" title="Using Schedulers" class="chapter done " data-progress="1.4" style="left: 25%;"></a>
    
        <a href="..\../content/getting_started_with_rxjs/testing_your_rx_application.html" title="Testing your Rx application" class="chapter done " data-progress="1.5" style="left: 30%;"></a>
    
        <a href="..\../content/getting_started_with_rxjs/implementing_your_own_observable_operators.html" title="Implementing Your Own Observable Operators" class="chapter done " data-progress="1.6" style="left: 35%;"></a>
    
        <a href="..\../content/creating_and_querying_observable_sequences/README.html" title="Creating and Querying Observable Sequences" class="chapter done new-chapter" data-progress="2" style="left: 40%;"></a>
    
        <a href="..\../content/creating_and_querying_observable_sequences/creating_and_subscribing_to_simple_observable_sequences.html" title="Creating and Subscribing to Simple Observable Sequences" class="chapter done " data-progress="2.1" style="left: 45%;"></a>
    
        <a href="..\../content/creating_and_querying_observable_sequences/bridging_to_events.html" title="Bridging to Events" class="chapter done " data-progress="2.2" style="left: 50%;"></a>
    
        <a href="..\../content/creating_and_querying_observable_sequences/bridging_to_callbacks_and_promises.html" title="Bridging to Callbacks and Promises" class="chapter done " data-progress="2.3" style="left: 55%;"></a>
    
        <a href="..\../content/creating_and_querying_observable_sequences/querying_observable_sequences.html" title="Querying Observable Sequences" class="chapter done " data-progress="2.4" style="left: 60%;"></a>
    
        <a href="..\../content/creating_and_querying_observable_sequences/operators_by_category.html" title="Operators by Category" class="chapter  " data-progress="2.5" style="left: 65%;"></a>
    
        <a href="..\../content/observable/README.html" title="Rx.Observable" class="chapter  new-chapter" data-progress="3" style="left: 70%;"></a>
    
        <a href="..\../content/observable/amb.html" title="amb" class="chapter  " data-progress="3.1" style="left: 75%;"></a>
    
        <a href="..\../content/observable/case.html" title="case" class="chapter  " data-progress="3.2" style="left: 80%;"></a>
    
        <a href="..\../content/observable/catch.html" title="catch" class="chapter  " data-progress="3.3" style="left: 85%;"></a>
    
        <a href="..\../content/observable/concat.html" title="concat" class="chapter  " data-progress="3.4" style="left: 90%;"></a>
    
        <a href="..\../content/observable/create.html" title="create" class="chapter  " data-progress="3.5" style="left: 95%;"></a>
    
        <a href="..\../content/observable/defer.html" title="defer" class="chapter  " data-progress="3.6" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_7">
                    
                        <h1 id="querying-observable-sequences">Querying Observable Sequences</h1>
<p>In <a href="events.html">Bridging to Events</a>, we have converted existing DOM and Node.js events into observable sequences to subscribe to them. In this topic, we will look at the first-class nature of observable sequences as IObservable<T> objects, in which generic LINQ operators are supplied by the Rx assemblies to manipulate these objects. Most operators take an observable sequence and perform some logic on it and output another observable sequence. In addition, as you can see from our code samples, you can even chain multiple operators on a source sequence to tweak the resulting sequence to your exact requirement.</p>
<h2 id="using-different-operators">Using Different Operators</h2>
<p>We have already used the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservablecreatesubscribe" target="_blank"><code>create</code></a> and <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservablerangestart-count-scheduler" target="_blank"><code>range</code></a> operators in previous topics to create and return simple sequences. We have also used the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservablefromeventelement-eventname" target="_blank"><code>fromEvent</code></a> and <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservablefromeventpatternaddhandler-removehandler" target="_blank"><code>fromEventPattern</code></a> operators to convert existing  events into observable sequences. In this topic, we will use other operators of the <code>Observable</code> type so that you can filter, group and transform data. Such operators take observable sequence(s) as input, and produce observable sequence(s) as output.</p>
<h2 id="combining-different-sequences">Combining different sequences</h2>
<p>In this section, we will examine some of the operators that combine various observable sequences into a single observable sequence. Notice that data are not transformed when we combine sequences.
In the following sample, we use the Concat operator to combine two sequences into a single sequence and subscribe to it. For illustration purpose, we will use the very simple <code>range(x, y)</code> operator to create a sequence of integers that starts with x and produces y sequential numbers afterwards.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> source1 = Rx.Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">var</span> source2 = Rx.Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);

source1.concat(source2)
   .subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> console.log(x); });

<span class="hljs-comment">// =&gt; 1</span>
<span class="hljs-comment">// =&gt; 2</span>
<span class="hljs-comment">// =&gt; 3</span>
<span class="hljs-comment">// =&gt; 1</span>
<span class="hljs-comment">// =&gt; 2</span>
<span class="hljs-comment">// =&gt; 3</span>
</code></pre>
<p>Notice that the resultant sequence is 1,2,3,1,2,3. This is because when you use the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypeconcatargs" target="_blank"><code>concat</code></a> operator, the 2nd sequence (source2) will not be active until after the 1st sequence (source1) has finished pushing all its values. It is only after source1 has completed, then source2 will start to push values to the resultant sequence. The subscriber will then get all the values from the resultant sequence.</p>
<p>Compare this with the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypemergemaxconcurrent--other" target="_blank"><code>merge</code></a> operator. If you run the following sample code, you will get 1,1,2,2,3,3. This is because the two sequences are active at the same time and values are pushed out as they occur in the sources. The resultant sequence only completes when the last source sequence has finished pushing values.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> source1 = Rx.Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">var</span> source2 = Rx.Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);

source1.merge(source2)
   .subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> console.log(x); });

<span class="hljs-comment">// =&gt; 1</span>
<span class="hljs-comment">// =&gt; 1</span>
<span class="hljs-comment">// =&gt; 2</span>
<span class="hljs-comment">// =&gt; 2</span>
<span class="hljs-comment">// =&gt; 3</span>
<span class="hljs-comment">// =&gt; 3</span>
</code></pre>
<p>Another comparison can be done with the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypecatchsecond--handler" target="_blank"><code>catch</code></a> operator. In this case, if source1 completes without any error, then source2 will not start. Therefore, if you run the following sample code, you will get 1,2,3 only since source2 (which produces 4,5,6) is ignored.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> source1 = Rx.Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">var</span> source2 = Rx.Observable.range(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>);

source1.catch(source2)
   .subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> console.log(x); });

<span class="hljs-comment">// =&gt; 1</span>
<span class="hljs-comment">// =&gt; 2</span>
<span class="hljs-comment">// =&gt; 3</span>
</code></pre>
<p>Finally, let’s look at <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypeonerrorresumenextsecond. This operator will move on to source2 even if source1 cannot be completed due to an error. In the following example, even though source1 represents a sequence that terminates with an exception by using the [`throw`](https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservablethrowexception-scheduler" target="_blank"><code>onErrorResumeNext</code></a> operator, the subscriber will receive values (1,2,3) published by source2. Therefore, if you expect either source sequence to produce any error, it is a safer bet to use <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypeonerrorresumenextsecond" target="_blank"><code>onErrorResumeNext</code></a> to guarantee that the subscriber will still receive some values.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> source1 = Rx.Observable.throw(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'An error has occurred.'</span>));
<span class="hljs-keyword">var</span> source2 = Rx.Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);

source1.onErrorResumeNext(source2)
   .subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> console.log(x); });

<span class="hljs-comment">// =&gt; 1</span>
<span class="hljs-comment">// =&gt; 2</span>
<span class="hljs-comment">// =&gt; 3</span>
</code></pre>
<h2 id="projection">Projection</h2>
<p>The <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypeselectselector-thisarg" target="_blank"><code>select</code></a> or <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypemapselector-thisarg" target="_blank"><code>map</code></a> operator can translate each element of an observable sequence into another form.</p>
<p>In the following example, we project a sequence of strings into an a series of integers representing the length.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> array = [<span class="hljs-string">'Reactive'</span>, <span class="hljs-string">'Extensions'</span>, <span class="hljs-string">'RxJS'</span>];

<span class="hljs-keyword">var</span> seqString = Rx.Observable.fromArray(array);

<span class="hljs-keyword">var</span> seqNum = seqString.map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> <span class="hljs-keyword">return</span> x.length; });

seqNum
   .subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> console.log(x); });

<span class="hljs-comment">// =&gt; 8</span>
<span class="hljs-comment">// =&gt; 10</span>
<span class="hljs-comment">// =&gt; 4</span>
</code></pre>
<p>In the following sample, which is an extension of the event conversion example we saw in the <a href="events.html">Bridging with Existing Events</a> topic, we use the <code>select</code> or <code>map</code> operator to project the event arguments to a point of x and y. In this way, we are transforming a mouse move event sequence into a data type that can be parsed and manipulated further, as can be seen in the next &quot;Filtering&quot; section.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> move = Rx.Observable.fromEvent(document, <span class="hljs-string">'mousemove'</span>);

<span class="hljs-keyword">var</span> points = move.map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span>
    <span class="hljs-keyword">return</span> { x: x.clientX, y: clientY };
});

points.subscribe(
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(pos)</span> {</span>
        console.log(<span class="hljs-string">'Mouse at point '</span> + pos.x + <span class="hljs-string">', '</span> + pos.y);
    });
</code></pre>
<p>Finally, let’s look at the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypeselectmanyselector-resultselector" target="_blank"><code>selectMany</code></a> or <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypeflatmapselector-resultselector" target="_blank"><code>flatMap</code></a> operator. The <code>selectMany</code> or <code>flatMap</code> operator has many overloads, one of which takes a selector function argument. This selector function is invoked on every value pushed out by the source observable. For each of these values, the selector projects it into a mini observable sequence. At the end, the <code>selectMany</code> or <code>flatMap</code> operator flattens all of these mini sequences into a single resultant sequence, which is then pushed to the subscriber.</p>
<p>The observable returned from <code>selectMany</code> or <code>flatMap</code> publishes <code>onCompleted</code> after the source sequence and all mini observable sequences produced by the selector have completed. It fires <code>onError</code> when an error has occurred in the source stream, when an exception was thrown by the selector function, or when an error occurred in any of the mini observable sequences.</p>
<p>In the following example, we first create a source sequence which produces an integer every 5 seconds, and decide to just take the first 2 values produced (by using the <code>take</code> operator). We then use <code>selectMany</code> or <code>flatMap</code> to project each of these integers using another sequence of {100, 101, 102}. By doing so, two mini observable sequences are produced, {100, 101, 102} and {100, 101, 102}. These are finally flattened into a single stream of integers of {100, 101, 102, 100, 101, 102} and pushed to the observer.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> source1 = Rx.Observable.interval(<span class="hljs-number">5000</span>).take(<span class="hljs-number">2</span>);
<span class="hljs-keyword">var</span> proj = Rx.Observable.range(<span class="hljs-number">100</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">var</span> resultSeq = source1.flatMap(proj);

<span class="hljs-keyword">var</span> subscription = resultSeq.subscribe(
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> console.log(<span class="hljs-string">'onNext: '</span> + x); },
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span> console.log(<span class="hljs-string">'onError: '</span> + e.message); },
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span> console.log(<span class="hljs-string">'onCompleted'</span>); });

<span class="hljs-comment">// =&gt; onNext: 100</span>
<span class="hljs-comment">// =&gt; onNext: 101</span>
<span class="hljs-comment">// =&gt; onNext: 102</span>
<span class="hljs-comment">// =&gt; onNext: 100</span>
<span class="hljs-comment">// =&gt; onNext: 101</span>
<span class="hljs-comment">// =&gt; onNext: 102</span>
<span class="hljs-comment">// =&gt; onCompleted</span>
</code></pre>
<h2 id="filtering">Filtering</h2>
<p>In the following example, we use the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservablegenerateinitialstate-condition-iterate-resultselector-scheduler" target="_blank"><code>generate</code></a> operator to create a simple observable sequence of numbers. The <code>generate</code> operator has several versions including with relative and absolute time scheduling. In our example, it takes an initial state (0 in our example), a conditional function to terminate (fewer than 10 times), an iterator (+1), a result selector (a square function of the current value). , and print out only those smaller than 5 using the <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypefilterpredicate-thisarg" target="_blank"><code>filter</code></a> or <a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md#rxobservableprototypewherepredicate-thisarg" target="_blank"><code>where</code></a> operators.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> seq = Rx.Observable.generate(
    <span class="hljs-number">0</span>,
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(i)</span> {</span> <span class="hljs-keyword">return</span> i &lt; <span class="hljs-number">10</span>; },
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(i)</span> {</span> <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span>; },
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(i)</span> {</span> <span class="hljs-keyword">return</span> i * i; });

<span class="hljs-keyword">var</span> source = seq.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(n)</span> {</span> <span class="hljs-keyword">return</span> n &lt; <span class="hljs-number">5</span>; });

<span class="hljs-keyword">var</span> subscription = source.subscribe(
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> {</span> console.log(<span class="hljs-string">'onNext: '</span> + x); },
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span> console.log(<span class="hljs-string">'onError: '</span> + e.message); },
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span> console.log(<span class="hljs-string">'onCompleted'</span>); });

<span class="hljs-comment">// =&gt; onNext: 0</span>
<span class="hljs-comment">// =&gt; onNext: 1</span>
<span class="hljs-comment">// =&gt; onNext: 4</span>
<span class="hljs-comment">// =&gt; onCompleted</span>
</code></pre>
<p>The following example is an extension of the projection example you have seen earlier in this topic. In that sample, we have used the <code>select</code> or <code>map</code> operator to project the event arguments into a point with x and y. In the following example, we use the <code>filter</code> or <code>where</code> and <code>select</code> or <code>map</code> operator to pick only those mouse movement that we are interested. In this case, we filter the mouse moves to those over the first bisector (where the x and y coordinates are equal).</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> move = Rx.Observable.fromEvent(document, <span class="hljs-string">'mousemove'</span>);

<span class="hljs-keyword">var</span> points = move.map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
    <span class="hljs-keyword">return</span> { x: e.clientX, y: e.clientY };
});

<span class="hljs-keyword">var</span> overfirstbisector = points.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(pos)</span> {</span>
    <span class="hljs-keyword">return</span> pos.x === pos.y;
});

<span class="hljs-keyword">var</span> movesub = overfirstbisector.subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(pos)</span> {</span> console.log(<span class="hljs-string">'mouse at '</span> + pos.x + <span class="hljs-string">', '</span> pos.y); });
</code></pre>
<h2 id="time-based-operation">Time-based Operation</h2>
<p>You can use the Buffer operators to perform time-based operations.</p>
<p>Buffering an observable sequence means that an observable sequence’s values are put into a buffer based on either a specified timespan or by a count threshold. This is especially helpful in situations when you expect a tremendous amount of data to be pushed out by the sequence, and the subscriber does not have the resource to process these values. By buffering the results based on time or count, and only returning a sequence of values when the criteria is exceeded (or when the source sequence has completed), the subscriber can process OnNext calls at its own pace.</p>
<p>In the following example, we first create a simple sequence of integers for every second. We then use the <code>bufferWithCount</code> operator and specify that each buffer will hold 5 items from the sequence. The <code>onNext</code> is called when the buffer is full. We then tally the sum of the buffer using calling <code>Array.reduce</code>. The buffer is automatically flushed and another cycle begins. The printout will be 10, 35, 60… in which 10=0+1+2+3+4, 35=5+6+7+8+9, and so on.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> seq = Rx.Observable.interval(<span class="hljs-number">1000</span>);

<span class="hljs-keyword">var</span> bufSeq = seq.bufferWithCount(<span class="hljs-number">5</span>);

bufSeq
    .map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(arr)</span> {</span> <span class="hljs-keyword">return</span> arr.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(acc, x)</span> {</span> <span class="hljs-keyword">return</span> acc + x; }, <span class="hljs-number">0</span>); })
    .subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(sum)</span> {</span> console.log(sum); });

<span class="hljs-comment">// =&gt; 10</span>
<span class="hljs-comment">// =&gt; 35</span>
<span class="hljs-comment">// =&gt; 60</span>
...
</code></pre>
<p>We can also create a buffer with a specified time span in milliseconds. In the following example, the buffer will hold items that have accumulated for 3 seconds. The printout will be 3, 12, 21… in which 3=0+1+2, 12=3+4+5, and so on.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> seq = Rx.Observable.interval(<span class="hljs-number">1000</span>);

<span class="hljs-keyword">var</span> bufSeq = seq.bufferWithTime(<span class="hljs-number">3000</span>);

bufSeq
    .map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(arr)</span> {</span> <span class="hljs-keyword">return</span> arr.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(acc, x)</span> {</span> <span class="hljs-keyword">return</span> acc + x; }, <span class="hljs-number">0</span>); })
    .subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(sum)</span> {</span> console.log(sum); });
</code></pre>
<p>Note that if you are using any of the <code>buffer*</code> or <code>window*</code> operators, you have to make sure that the sequence is not empty before filtering on it.</p>
<h2 id="operators-by-categories">Operators by Categories</h2>
<p>The <a href="operators.html">Operators by Categories</a> topic lists of all major operators implemented by the <code>Observable</code> type by their categories; specifically: creation, conversion, combine, functional, mathematical, time, exceptions, miscellaneous, selection and primitives.</p>
<h2 id="see-also">See Also</h2>
<p><em>Reference</em></p>
<ul>
<li><a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md" target="_blank">Observable</a></li>
</ul>
<p><em>Concepts</em></p>
<ul>
<li><a href="operators.html">Operators by Categories</a></li>
</ul>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="..\../content/creating_and_querying_observable_sequences/bridging_to_callbacks_and_promises.html" class="navigation navigation-prev "><i class="fa fa-angle-left"></i></a>
        
        
        <a href="..\../content/creating_and_querying_observable_sequences/operators_by_category.html" class="navigation navigation-next "><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="..\..\gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="..\..\gitbook/app.js"></script>
        

    
    <script src="..\..\gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="..\..\gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"white","family":"sans"}};
    gitbook.start(config);
});
</script>

    </body>
</html>
